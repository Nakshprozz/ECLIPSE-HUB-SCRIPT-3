-- ECLIPSE HUB ðŸŒ™ Script by NKDev
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local localPlayer = Players.LocalPlayer
local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Main GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "EclipseHub"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = game:GetService("CoreGui")

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 250)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -125)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BackgroundTransparency = 0.1
MainFrame.ClipsDescendants = true

-- Rounded corners
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

ScreenGui.Parent = game:GetService("CoreGui")
MainFrame.Parent = ScreenGui

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(0, 200, 0, 40)
Title.Position = UDim2.new(0.5, -100, 0, 10)
Title.BackgroundTransparency = 1
Title.Text = "ECLIPSE HUB ðŸŒ™"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = MainFrame

-- Made by text
local MadeBy = Instance.new("TextLabel")
MadeBy.Name = "MadeBy"
MadeBy.Size = UDim2.new(0, 200, 0, 20)
MadeBy.Position = UDim2.new(0.5, -100, 0, 40)
MadeBy.BackgroundTransparency = 1
MadeBy.Text = "Made By NKDev"
MadeBy.TextColor3 = Color3.fromRGB(255, 255, 255)
MadeBy.TextTransparency = 0.5
MadeBy.Font = Enum.Font.Gotham
MadeBy.TextSize = 14
MadeBy.Parent = MainFrame

-- Panel
local Panel = Instance.new("Frame")
Panel.Name = "Panel"
Panel.Size = UDim2.new(0, 320, 0, 170)
Panel.Position = UDim2.new(0.5, -160, 0, 70)
Panel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Panel.BackgroundTransparency = 0.2

local PanelCorner = Instance.new("UICorner")
PanelCorner.CornerRadius = UDim.new(0, 8)
PanelCorner.Parent = Panel

Panel.Parent = MainFrame

-- Speed Toggle
local SpeedFrame = Instance.new("Frame")
SpeedFrame.Name = "SpeedFrame"
SpeedFrame.Size = UDim2.new(0, 300, 0, 40)
SpeedFrame.Position = UDim2.new(0.5, -150, 0, 10)
SpeedFrame.BackgroundTransparency = 1
SpeedFrame.Parent = Panel

local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Name = "SpeedLabel"
SpeedLabel.Size = UDim2.new(0, 150, 0, 40)
SpeedLabel.Position = UDim2.new(0, 0, 0, 0)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "Increase Speed"
SpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedLabel.Font = Enum.Font.Gotham
SpeedLabel.TextSize = 16
SpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
SpeedLabel.Parent = SpeedFrame

local SpeedToggle = Instance.new("TextButton")
SpeedToggle.Name = "SpeedToggle"
SpeedToggle.Size = UDim2.new(0, 50, 0, 25)
SpeedToggle.Position = UDim2.new(1, -60, 0.5, -12.5)
SpeedToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SpeedToggle.AutoButtonColor = false
SpeedToggle.Text = ""
SpeedToggle.Font = Enum.Font.SourceSans
SpeedToggle.TextSize = 14

local SpeedToggleCorner = Instance.new("UICorner")
SpeedToggleCorner.CornerRadius = UDim.new(0, 12)
SpeedToggleCorner.Parent = SpeedToggle

local SpeedToggleCircle = Instance.new("Frame")
SpeedToggleCircle.Name = "SpeedToggleCircle"
SpeedToggleCircle.Size = UDim2.new(0, 21, 0, 21)
SpeedToggleCircle.Position = UDim2.new(0, 2, 0.5, -10.5)
SpeedToggleCircle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
SpeedToggleCircle.BorderSizePixel = 0

local SpeedToggleCircleCorner = Instance.new("UICorner")
SpeedToggleCircleCorner.CornerRadius = UDim.new(0, 10)
SpeedToggleCircleCorner.Parent = SpeedToggleCircle

SpeedToggleCircle.Parent = SpeedToggle
SpeedToggle.Parent = SpeedFrame

local SpeedDescription = Instance.new("TextLabel")
SpeedDescription.Name = "SpeedDescription"
SpeedDescription.Size = UDim2.new(0, 300, 0, 20)
SpeedDescription.Position = UDim2.new(0, 0, 0, 40)
SpeedDescription.BackgroundTransparency = 1
SpeedDescription.Text = "Turning It On Sets The Players Speed To 50"
SpeedDescription.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedDescription.TextTransparency = 0.5
SpeedDescription.Font = Enum.Font.Gotham
SpeedDescription.TextSize = 12
SpeedDescription.TextXAlignment = Enum.TextXAlignment.Left
SpeedDescription.Parent = SpeedFrame

-- Fly Toggle
local FlyFrame = Instance.new("Frame")
FlyFrame.Name = "FlyFrame"
FlyFrame.Size = UDim2.new(0, 300, 0, 40)
FlyFrame.Position = UDim2.new(0.5, -150, 0, 80)
FlyFrame.BackgroundTransparency = 1
FlyFrame.Parent = Panel

local FlyLabel = Instance.new("TextLabel")
FlyLabel.Name = "FlyLabel"
FlyLabel.Size = UDim2.new(0, 150, 0, 40)
FlyLabel.Position = UDim2.new(0, 0, 0, 0)
FlyLabel.BackgroundTransparency = 1
FlyLabel.Text = "Fly"
FlyLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyLabel.Font = Enum.Font.Gotham
FlyLabel.TextSize = 16
FlyLabel.TextXAlignment = Enum.TextXAlignment.Left
FlyLabel.Parent = FlyFrame

local FlyToggle = Instance.new("TextButton")
FlyToggle.Name = "FlyToggle"
FlyToggle.Size = UDim2.new(0, 50, 0, 25)
FlyToggle.Position = UDim2.new(1, -60, 0.5, -12.5)
FlyToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FlyToggle.AutoButtonColor = false
FlyToggle.Text = ""
FlyToggle.Font = Enum.Font.SourceSans
FlyToggle.TextSize = 14

local FlyToggleCorner = Instance.new("UICorner")
FlyToggleCorner.CornerRadius = UDim.new(0, 12)
FlyToggleCorner.Parent = FlyToggle

local FlyToggleCircle = Instance.new("Frame")
FlyToggleCircle.Name = "FlyToggleCircle"
FlyToggleCircle.Size = UDim2.new(0, 21, 0, 21)
FlyToggleCircle.Position = UDim2.new(0, 2, 0.5, -10.5)
FlyToggleCircle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
FlyToggleCircle.BorderSizePixel = 0

local FlyToggleCircleCorner = Instance.new("UICorner")
FlyToggleCircleCorner.CornerRadius = UDim.new(0, 10)
FlyToggleCircleCorner.Parent = FlyToggleCircle

FlyToggleCircle.Parent = FlyToggle
FlyToggle.Parent = FlyFrame

local FlyDescription = Instance.new("TextLabel")
FlyDescription.Name = "FlyDescription"
FlyDescription.Size = UDim2.new(0, 300, 0, 20)
FlyDescription.Position = UDim2.new(0, 0, 0, 40)
FlyDescription.BackgroundTransparency = 1
FlyDescription.Text = "Turning It On Enables Flight"
FlyDescription.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyDescription.TextTransparency = 0.5
FlyDescription.Font = Enum.Font.Gotham
FlyDescription.TextSize = 12
FlyDescription.TextXAlignment = Enum.TextXAlignment.Left
FlyDescription.Parent = FlyFrame

-- Close and Minimize buttons
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -40, 0, 10)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 16

local CloseButtonCorner = Instance.new("UICorner")
CloseButtonCorner.CornerRadius = UDim.new(0, 6)
CloseButtonCorner.Parent = CloseButton

CloseButton.Parent = MainFrame

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(1, -80, 0, 10)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 16

local MinimizeButtonCorner = Instance.new("UICorner")
MinimizeButtonCorner.CornerRadius = UDim.new(0, 6)
MinimizeButtonCorner.Parent = MinimizeButton

MinimizeButton.Parent = MainFrame

-- Draggable button (hidden initially)
local DragButton = Instance.new("TextButton")
DragButton.Name = "DragButton"
DragButton.Size = UDim2.new(0, 100, 0, 40)
DragButton.Position = UDim2.new(0, 10, 0, 10)
DragButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
DragButton.BackgroundTransparency = 0.1
DragButton.Text = "EðŸŒ™"
DragButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DragButton.Font = Enum.Font.GothamBold
DragButton.TextSize = 16
DragButton.Visible = false

local DragButtonCorner = Instance.new("UICorner")
DragButtonCorner.CornerRadius = UDim.new(0, 12)
DragButtonCorner.Parent = DragButton

DragButton.Parent = ScreenGui

-- Toggle states
local speedEnabled = false
local flyEnabled = false
local minimized = false

-- Speed toggle functionality
SpeedToggle.MouseButton1Click:Connect(function()
    speedEnabled = not speedEnabled
    
    if speedEnabled then
        humanoid.WalkSpeed = 50
        SpeedToggleCircle:TweenPosition(UDim2.new(1, -23, 0.5, -10.5), "Out", "Quad", 0.2, true)
        SpeedToggle.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
    else
        humanoid.WalkSpeed = 16
        SpeedToggleCircle:TweenPosition(UDim2.new(0, 2, 0.5, -10.5), "Out", "Quad", 0.2, true)
        SpeedToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    end
end)

-- Fly toggle functionality
local flyParts = {}

FlyToggle.MouseButton1Click:Connect(function()
    flyEnabled = not flyEnabled
    
    if flyEnabled then
        FlyToggleCircle:TweenPosition(UDim2.new(1, -23, 0.5, -10.5), "Out", "Quad", 0.2, true)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
        
        -- Create fly parts
        local torso = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
        if torso then
            local bg = Instance.new("BodyGyro", torso)
            bg.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
            bg.P = 10000
            
            local bv = Instance.new("BodyVelocity", torso)
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.Velocity = Vector3.new(0, 0, 0)
            
            flyParts = {bg, bv}
        end
    else
        FlyToggleCircle:TweenPosition(UDim2.new(0, 2, 0.5, -10.5), "Out", "Quad", 0.2, true)
        FlyToggle.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        
        -- Remove fly parts
        for _, part in pairs(flyParts) do
            if part then
                part:Destroy()
            end
        end
        flyParts = {}
    end
end)

-- Fly controls
local flying = false
local flySpeed = 1

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not flyEnabled or gameProcessed then return end
    
    local torso = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso")
    if not torso or not flyParts[2] then return end
    
    if input.KeyCode == Enum.KeyCode.Space then
        flyParts[2].Velocity = Vector3.new(0, 50 * flySpeed, 0)
        flying = true
    elseif input.KeyCode == Enum.KeyCode.LeftShift then
        flyParts[2].Velocity = Vector3.new(0, -50 * flySpeed, 0)
        flying = true
    elseif input.KeyCode == Enum.KeyCode.W then
        flyParts[2].Velocity = torso.CFrame.LookVector * 50 * flySpeed
        flying = true
    elseif input.KeyCode == Enum.KeyCode.A then
        flyParts[2].Velocity = -torso.CFrame.RightVector * 50 * flySpeed
        flying = true
    elseif input.KeyCode == Enum.KeyCode.S then
        flyParts[2].Velocity = -torso.CFrame.LookVector * 50 * flySpeed
        flying = true
    elseif input.KeyCode == Enum.KeyCode.D then
        flyParts[2].Velocity = torso.CFrame.RightVector * 50 * flySpeed
        flying = true
    end
end)

UserInputService.InputEnded:Connect(function(input, gameProcessed)
    if not flyEnabled or gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.Space or input.KeyCode == Enum.KeyCode.LeftShift or
       input.KeyCode == Enum.KeyCode.W or input.KeyCode == Enum.KeyCode.A or
       input.KeyCode == Enum.KeyCode.S or input.KeyCode == Enum.KeyCode.D then
        if flyParts[2] then
            flyParts[2].Velocity = Vector3.new(0, 0, 0)
        end
        flying = false
    end
end)

-- Close button functionality
CloseButton.MouseButton1Click:Connect(function()
    local confirmFrame = Instance.new("Frame")
    confirmFrame.Name = "ConfirmFrame"
    confirmFrame.Size = UDim2.new(0, 250, 0, 120)
    confirmFrame.Position = UDim2.new(0.5, -125, 0.5, -60)
    confirmFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    confirmFrame.BorderSizePixel = 0
    
    local confirmCorner = Instance.new("UICorner")
    confirmCorner.CornerRadius = UDim.new(0, 8)
    confirmCorner.Parent = confirmFrame
    
    local confirmText = Instance.new("TextLabel")
    confirmText.Name = "ConfirmText"
    confirmText.Size = UDim2.new(0, 230, 0, 50)
    confirmText.Position = UDim2.new(0.5, -115, 0, 10)
    confirmText.BackgroundTransparency = 1
    confirmText.Text = "Are you sure you want to close ECLIPSE HUB?"
    confirmText.TextColor3 = Color3.fromRGB(255, 255, 255)
    confirmText.Font = Enum.Font.Gotham
    confirmText.TextSize = 16
    confirmText.TextWrapped = true
    confirmText.Parent = confirmFrame
    
    local yesButton = Instance.new("TextButton")
    yesButton.Name = "YesButton"
    yesButton.Size = UDim2.new(0, 100, 0, 30)
    yesButton.Position = UDim2.new(0.5, -110, 0, 70)
    yesButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    yesButton.Text = "Yes"
    yesButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    yesButton.Font = Enum.Font.Gotham
    yesButton.TextSize = 14
    
    local yesCorner = Instance.new("UICorner")
    yesCorner.CornerRadius = UDim.new(0, 6)
    yesCorner.Parent = yesButton
    
    yesButton.Parent = confirmFrame
    
    local noButton = Instance.new("TextButton")
    noButton.Name = "NoButton"
    noButton.Size = UDim2.new(0, 100, 0, 30)
    noButton.Position = UDim2.new(0.5, 10, 0, 70)
    noButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    noButton.Text = "No"
    noButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    noButton.Font = Enum.Font.Gotham
    noButton.TextSize = 14
    
    local noCorner = Instance.new("UICorner")
    noCorner.CornerRadius = UDim.new(0, 6)
    noCorner.Parent = noButton
    
    noButton.Parent = confirmFrame
    
    confirmFrame.Parent = MainFrame
    
    yesButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    noButton.MouseButton1Click:Connect(function()
        confirmFrame:Destroy()
    end)
end)

-- Minimize button functionality
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    
    if minimized then
        MainFrame.Visible = false
        DragButton.Visible = true
    else
        MainFrame.Visible = true
        DragButton.Visible = false
    end
end)

-- Make DragButton draggable
local dragInput, dragStart, startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    DragButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DragButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragStart = input.Position
        startPos = DragButton.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragInput = nil
            end
        end)
    end
end)

DragButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput then
        updateInput(input)
    end
end)

-- Make MainFrame draggable
MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragInput = nil
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

-- Character handling
localPlayer.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = newChar:WaitForChild("Humanoid")
    
    if speedEnabled then
        humanoid.WalkSpeed = 50
    else
        humanoid.WalkSpeed = 16
    end
    
    if flyEnabled then
        FlyToggle.MouseButton1Click()
        task.wait()
        FlyToggle.MouseButton1Click()
    end
end)
